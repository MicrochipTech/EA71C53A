<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="http://192.168.0.41:4000/wireless/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Zigbee Combined Interface Demo | Microchip MPLAB Harmony Wireless help</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Zigbee Combined Interface Demo" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 Wireless package" /> <meta property="og:description" content="Harmony 3 Wireless package" /> <link rel="canonical" href="running_demo.html" /> <meta property="og:url" content="http://192.168.0.41:4000/wireless/apps/zigbee/running_demo.html" /> <meta property="og:site_name" content="Microchip MPLAB Harmony Wireless help" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Zigbee Combined Interface Demo" /> <script type="application/ld+json"> {"@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://192.168.0.41:4000/wireless/assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"url":"http://192.168.0.41:4000/wireless/apps/zigbee/running_demo.html","headline":"Zigbee Combined Interface Demo","description":"Harmony 3 Wireless package","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="running_demo.html#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="../../index.html" class="nav-list-link">Harmony 3 Wireless Package</a></li><li class="nav-list-item active"><a href="running_demo.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../readme.html" class="nav-list-link">Examples applications</a><ul class="nav-list "><li class="nav-list-item "><a href="running_demo.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/readme.html" class="nav-list-link">BLE Building Blocks</a><ul class="nav-list"><li class="nav-list-item "> <a href="../ble/building_blocks/peripheral/readme.html" class="nav-list-link">Peripheral Building Blocks</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/central/scan_ext_adv/readme.html" class="nav-list-link">BLE Extended Scan</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/central/readme.html" class="nav-list-link">Central Building Blocks</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/central/connection/readme.html" class="nav-list-link">BLE Connection(Central)</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/central/profiles_services/readme.html" class="nav-list-link">BLE Profiles and Services (Central)</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/central/profiles_services/trp_uart/readme.html" class="nav-list-link">Central Transparent UART</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/central/profiles_services/ml_trp_uart/readme.html" class="nav-list-link">Multi Transparent UART</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/chip_peripherals/uart/readme.html" class="nav-list-link">UART Demo</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/central/freertos_ble_stack_init_central.html" class="nav-list-link">Freetos Stack Init</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/peripheral/legacy_adv_sleep/readme.html" class="nav-list-link">Legacy Advertisement</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/central/legacy_scan/readme.html" class="nav-list-link">Legacy Scan</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/peripheral/connection/readme.html" class="nav-list-link">Peripheral Connection</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/peripheral/ext_adv/readme.html" class="nav-list-link">Extended Advertisement</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/peripheral/profiles_services/readme.html" class="nav-list-link">Profile and Services</a> </li><li class="nav-list-item "> <a href="../ble/building_blocks/peripheral/profiles_services/trp_uart/readme.html" class="nav-list-link">Proprietary UART Service</a> </li></ul></li><li class="nav-list-item "><a href="running_demo.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/advanced_applications/readme.html" class="nav-list-link">BLE Advance Applications</a><ul class="nav-list"><li class="nav-list-item "> <a href="../ble/advanced_applications/ble_uart_demo/readme.html" class="nav-list-link">BLE UART Demo</a> </li><li class="nav-list-item "> <a href="../ble/advanced_applications/ble_sensor_app/readme.html" class="nav-list-link">BLE Sensor DEMO</a> </li><li class="nav-list-item "> <a href="../ble/advanced_applications/ble_sensor_app/protocol.html" class="nav-list-link">BLE Sensor (Protocol Exchange)</a> </li></ul></li><li class="nav-list-item active"><a href="running_demo.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="readme.html" class="nav-list-link">Zigbee</a><ul class="nav-list"><li class="nav-list-item "> <a href="zigbee_multisensor/readme.html" class="nav-list-link">Zigbee Multi-Sensor Low Power</a> </li><li class="nav-list-item active"> <a href="running_demo.html" class="nav-list-link active">Zigbee Combined Interface Demo</a> </li><li class="nav-list-item "> <a href="zigbee_commissioning.html" class="nav-list-link">Zigbee Commissioning Procedure</a> </li><li class="nav-list-item "> <a href="zigbee_greenpower.html" class="nav-list-link">Zigbee Green Power</a> </li><li class="nav-list-item "> <a href="zigbee_project_generation.html" class="nav-list-link">Zigbee Project Creation App</a> </li><li class="nav-list-item "> <a href="zigbee_security_model.html" class="nav-list-link">Zigbee Network Security</a> </li></ul></li><li class="nav-list-item "><a href="running_demo.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../multiprotocol/readme.html" class="nav-list-link">Multiprotocol</a><ul class="nav-list"><li class="nav-list-item "> <a href="../multiprotocol/ble_zigbee_basic/readme.html" class="nav-list-link">BLE+ZIGBEE Application</a> </li><li class="nav-list-item "> <a href="../multiprotocol/ble_zigbee_light_prov/readme.html" class="nav-list-link">Multiprotocol Demo App</a> </li><li class="nav-list-item "> <a href="../multiprotocol/ble_zigbee_multiSensor_prov/readme.html" class="nav-list-link">Zigbee Multi-Sensor, commissioning App</a> </li><li class="nav-list-item "> <a href="../multiprotocol/ble_zigbee_light_prov/protocol.html" class="nav-list-link">Multiprotocol Protocol</a> </li></ul></li><li class="nav-list-item "><a href="running_demo.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../docs/readme.html" class="nav-list-link">User Docs</a><ul class="nav-list"><li class="nav-list-item "> <a href="consoleCommands.html" class="nav-list-link">Serial Console Commands</a> </li><li class="nav-list-item "> <a href="../docs/lowpower.html" class="nav-list-link">Low Power</a> </li><li class="nav-list-item "> <a href="../docs/user_action.html" class="nav-list-link">User Action</a> </li><li class="nav-list-item "> <a href="../docs/generate_code.html" class="nav-list-link">Harmony 3 Code Generation</a> </li><li class="nav-list-item "> <a href="../docs/creating_new_mplabx_harmony_project.html" class="nav-list-link">Generating New Harmony Code</a> </li><li class="nav-list-item "> <a href="../docs/pic32cx_bz2_wbz45x_sdk_setup.html" class="nav-list-link">SDK Setup</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="running_demo.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../release_notes.html" class="nav-list-link">Release notes</a><ul class="nav-list "><li class="nav-list-item "><a href="../ble/advanced_applications/ble_uart_demo/release_notes.html" class="nav-list-link">BLE UART Demo</a></li><li class="nav-list-item "><a href="../ble/advanced_applications/ble_sensor_app/release_notes.html" class="nav-list-link">BLE Sensor Release notes</a></li><li class="nav-list-item "><a href="running_demo.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/chip_peripherals/uart/release_notes.html" class="nav-list-link">UART Hello World</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="running_demo.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/peripheral/legacy_adv_sleep/release_notes.html" class="nav-list-link">BLE Legacy Adv</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="running_demo.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/peripheral/ext_adv/release_notes.html" class="nav-list-link">BLE Extended Advertising</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="running_demo.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/peripheral/connection/release_notes.html" class="nav-list-link">BLE Connection (Peripheral)</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="running_demo.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/peripheral/profiles_services/trp_uart/release_notes.html" class="nav-list-link">BLE Tranparent UART (Peirpheral)</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="running_demo.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/central/connection/release_notes.html" class="nav-list-link">BLE Connection (Central)</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="running_demo.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/central/legacy_scan/release_notes.html" class="nav-list-link">BLE Legacy Scan</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="running_demo.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/central/profiles_services/ml_trp_uart/release_notes.html" class="nav-list-link">BLE Multilink Transparent UART(Central)</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="running_demo.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../ble/building_blocks/central/profiles_services/trp_uart/release_notes.html" class="nav-list-link">BLE Transparent UART(Central)</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="../ble/building_blocks/central/scan_ext_adv/release_notes.html" class="nav-list-link">BLE Scan Extended Advertising</a></li><li class="nav-list-item "><a href="zigbee_combined_interface/release_notes.html" class="nav-list-link">Zigbee Combined Interface App</a></li><li class="nav-list-item "><a href="zigbee_lights/release_notes.html" class="nav-list-link">Zigbee Extended Lights App</a></li><li class="nav-list-item "><a href="zigbee_multisensor/release_notes.html" class="nav-list-link">Zigbee Multi-Sensor Device Low Power</a></li><li class="nav-list-item "><a href="../multiprotocol/ble_zigbee_light_prov/release_notes.html" class="nav-list-link">Zigbee Multiprotocol Lights Prov App</a></li><li class="nav-list-item "><a href="../multiprotocol/ble_zigbee_multiSensor_prov/release_notes.html" class="nav-list-link">Zigbee Multi-Sensor and commissioning</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Microchip MPLAB Harmony Wireless help" aria-label="Search Microchip MPLAB Harmony Wireless help" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../readme.html">Examples applications</a></li> <li class="breadcrumb-nav-list-item"><a href="readme.html">Zigbee</a></li> <li class="breadcrumb-nav-list-item"><span>Zigbee Combined Interface Demo</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <p><a href="https://www.microchip.com"><img src="https://www.microchip.com/ResourcePackages/Microchip/assets/dist/images/logo.png" alt="MCHP" /></a></p> <h1 id="wbz451-zigbee-application-demo-light-control-and-monitoring-using-combined-interface"> <a href="running_demo.html#wbz451-zigbee-application-demo-light-control-and-monitoring-using-combined-interface" aria-labelledby="wbz451-zigbee-application-demo-light-control-and-monitoring-using-combined-interface" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> WBZ451 Zigbee Application Demo: Light control and Monitoring using Combined Interface </h1> <blockquote> <h2 id="the-hardware-setup-network-formation-commissioningjoining-procedures-are-same-for-other-supported-device-types-like-thermostat-ias-ace-multi-sensor-joining-to-combined-interface-network"> <a href="running_demo.html#the-hardware-setup-network-formation-commissioningjoining-procedures-are-same-for-other-supported-device-types-like-thermostat-ias-ace-multi-sensor-joining-to-combined-interface-network" aria-labelledby="the-hardware-setup-network-formation-commissioningjoining-procedures-are-same-for-other-supported-device-types-like-thermostat-ias-ace-multi-sensor-joining-to-combined-interface-network" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The hardware setup, network formation, commissioning/joining procedures are same for other supported device types like Thermostat, IAS ACE, Multi sensor joining to combined interface network. </h2> <h3 id="wbz451-curiosity-board"> <a href="running_demo.html#wbz451-curiosity-board" aria-labelledby="wbz451-curiosity-board" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> WBZ451 Curiosity Board </h3> </blockquote> <p>Devices (Device): | <strong>PIC32CX1012BZ25048(MCU) on WBZ451 module</strong> |</p> <p>Features : | <strong>PIC32CX1012BZ25048(MCU) on WBZ451 module</strong> |</p> <p>Devices (Used, On-Board): | <strong>RGB LED</strong> | <strong>User Button</strong>| <strong>UART-USB Converter</strong>|</p> <h2 id="introduction"> <a href="running_demo.html#introduction" aria-labelledby="introduction" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Introduction </h2> <p>This page describes the demo steps for Light control and Monitoring using Combined Interface on WBZ451 Curiosity boards.</p> <p>An overview of the demo is shown below.</p> <p><img src="doc/resources/demo_overview.jpg" alt="Demo-Overview" /></p> <h2 id="prerequisites-"> <a href="running_demo.html#prerequisites-" aria-labelledby="prerequisites-" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prerequisites : </h2> <ul> <li> <h3 id="hardware-required"> <a href="running_demo.html#hardware-required" aria-labelledby="hardware-required" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hardware Required </h3> <div class="table-wrapper"><table> <thead> <tr> <th><strong>Tool</strong></th> <th><strong>Qty</strong></th> </tr> </thead> <tbody> <tr> <td>PIC32 WBZ451 Curiosity Boards</td> <td>2</td> </tr> <tr> <td>Micro USB cable</td> <td>2</td> </tr> <tr> <td>Personal Computer</td> <td>1</td> </tr> </tbody> </table></div> <h4 id="hardware-overview"> <a href="running_demo.html#hardware-overview" aria-labelledby="hardware-overview" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hardware Overview </h4> <p><img src="doc/resources/Curiosity-internal.png" alt="BLE-Top" /></p> <h4 id="hardware-block-diagram---curiosity-board"> <a href="running_demo.html#hardware-block-diagram---curiosity-board" aria-labelledby="hardware-block-diagram---curiosity-board" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hardware Block Diagram - Curiosity Board </h4> <p><img src="doc/resources/BLE-Block.png" alt="BLE-Mapped" /></p> </li> <li> <h3 id="software---teraterm"> <a href="running_demo.html#software---teraterm" aria-labelledby="software---teraterm" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Software - <a href="https://ttssh2.osdn.jp/index.html.en">TeraTerm</a> </h3> </li> <li> <h3 id="sdk-setup-----sdk-setup"> <a href="running_demo.html#sdk-setup-----sdk-setup" aria-labelledby="sdk-setup-----sdk-setup" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SDK Setup - <a href="../docs/pic32cx_bz2_wbz45x_sdk_setup.html">SDK Setup</a> </h3> </li> </ul> <h2 id="demo-description"> <a href="running_demo.html#demo-description" aria-labelledby="demo-description" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Demo Description </h2> <p>The demo applications demonstrates the Zigbee protocol functionality of PIC32CXBZ family of devices and modules. It consists of a ZigBee 3.0 Coordinator and Router implemented as shown below :</p> <div class="table-wrapper"><table> <thead> <tr> <th><strong>Application</strong></th> <th><strong>Zigbee Logical Device Type</strong></th> <th><strong>Functionality</strong></th> </tr> </thead> <tbody> <tr> <td>Combined Interface</td> <td>Coordinator</td> <td>Device capable of controlling and monitoring other devices. It is typically a mains-powered device like a personal computer</td> </tr> <tr> <td>Extended Lights</td> <td>Router</td> <td>Is a lighting device that can be switched on/off , brightness &amp; color of the light can be adjusted via the color commands.</td> </tr> </tbody> </table></div> <h4 id="zigbee-device-commissioning"> <a href="running_demo.html#zigbee-device-commissioning" aria-labelledby="zigbee-device-commissioning" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Zigbee device commissioning: </h4> <ul> <li>The Zigbee router i.e. Extended Lights can be commissioned and brought to the existing zigbee network formed by Zigbee coordinator i.e. Combined Interface or can create new zigbee Distributed network (if there is no nearby network).</li> </ul> <h4 id="zigbee-light-control"> <a href="running_demo.html#zigbee-light-control" aria-labelledby="zigbee-light-control" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Zigbee Light control: </h4> <ul> <li>Extended light RGB LED can be controlled from Zigbee Gateway of the same network.</li> <li>When the light status is changed the light change report will be sent to zigbee gateway through Zigbee communication.</li> </ul> <h3 id="expected-demo-behavior"> <a href="running_demo.html#expected-demo-behavior" aria-labelledby="expected-demo-behavior" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Expected Demo Behavior </h3> <p>To run the demo , we need 2 devices . One is the Combined Interface and the other is extended color light.</p> <ol> <li>One of the WBZ451 Curiosity board is programmed with Combined Interface, Zigbee only application which can act as Zigbee Gateway/Coordinator.</li> <li>Another WBZ451 Curiosity board is programmed with Extended Lights application which can act as Zigbee Router.</li> </ol> <p>Program the pre-compiled hex images <a href="running_demo.html#tasks">Programming the precompiled hex file using MPLABX IPE</a> on curiosity boards to run the demo.</p> <ul> <li>If want to do changes in the demo code and would like to program/debug the customized code follow the instruction in <a href="running_demo.html#tasks_1">Build and Program The Application</a></li> <li>If want to generate an application for other Zigbee device types from scratch <a href="running_demo.html#tasks_3">Creating New Application Device Types</a></li> </ul> <h4 id="on-board-resource-usage"> <a href="running_demo.html#on-board-resource-usage" aria-labelledby="on-board-resource-usage" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> On-board Resource Usage </h4> <p>| <strong>Sensor</strong> | <strong>Peripheral Used</strong> | <strong>I/O Pin</strong> | <strong>Comment</strong> | | —————— | ————————————- | ————- | ———————————————————————————————– | | LED Control | TC2 (WO0, WO1), TC3 (WO0) in PWM Mode | PB0, PB3, PB5 | RGB LED color control. | | Switch | EXTINT0 | PB4 | SW1 button in curiosity board to do Reset To Factory new |</p> <p><a name="tasks_2"> </a></p> <h4 id="demo-steps"> <a href="running_demo.html#demo-steps" aria-labelledby="demo-steps" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Demo Steps: </h4> <h5 id="hardware--software-setup"> <a href="running_demo.html#hardware--software-setup" aria-labelledby="hardware--software-setup" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hardware &amp; Software Setup </h5> <ol> <li>Supply power to WBZ451 Curiosity Board consisting of Combined Interface application by connecting a USB cable. Power Supply (PS) Green LED will turn on when connect to PC.</li> </ol> <p align="Center"> <img src="doc/resources/Curiosity_USER_LED_USB.jpg" width="500" height="200" /> </p> <ol> <li>The application activity is shown as “Console Log” through on board UART-USB converter <ul> <li>Open Terminal(eg: Tera Term) with the setup as shown below to look for these logs</li> </ul> <p><code class="language-plaintext highlighter-rouge"> Receive, Transmit : Select CR+LF </code></p> <p><code class="language-plaintext highlighter-rouge"> Local Echo : Enabled (Input console commands are visible) </code></p> <p><code class="language-plaintext highlighter-rouge"> UART baud settings: 115200 8-N-1 without flow control </code></p> </li> </ol> <p><img src="doc/resources/serial_terminal_setup_all.jpg" alt="serial_terminal_setup_all" /></p> <h5 id="network-formation-coordinator----combined-interface"> <a href="running_demo.html#network-formation-coordinator----combined-interface" aria-labelledby="network-formation-coordinator----combined-interface" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Network Formation (Coordinator - (Combined Interface)) </h5> <ol> <li>Once the board is powered on and serial terminal setup is done, the board is ready to be operated as a coordinator. It is responsible for initially forming the network and then, via the Trust Centre functionality, managing which other devices are allowed to join the network and distributing security keys to those that are allowed to join.</li> </ol> <ul> <li> <p>Input command : <em>resetToFN</em> and look for the below logs for successful zigbee network formation on CI. It will open up the network for other zigbee devices to join for first 180 seconds from the first powerON. The process to join a device after the timeout is explained in Step 4 Case 2.</p> <p align="left"> <img src="doc/resources/combined_interface_establish_network.jpg" /> </p> </li> <li> <p>The commissioning procedure will last for 180 seconds, in case no devices are there in vicinity we will observe the logs as shown below :</p> <p align="left"> <img src="doc/resources/ci_no_devices.jpg" /> </p> <p>We will discuss about the case, when devices are vicinity in the next steps.</p> </li> </ul> <h5 id="commissioning-router---extended-light"> <a href="running_demo.html#commissioning-router---extended-light" aria-labelledby="commissioning-router---extended-light" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Commissioning (Router - Extended Light) </h5> <ol> <li>The Extended Lights can be connected to any zigbee gateway. It could be either Amazon Echo Plus or another Combined interface running on WBZ451 Curiosity Board. Here, we will discuss about the steps followed for WBZ451 based combined interface acting as a Zigbee gateway.</li> </ol> <ul> <li>Supply power to another WBZ451 Curiosity Board by connecting a USB cable. Power Supply (PS) Green LED will turn on when connect to PC.</li> <li> <p>Follow step 2 for UART terminal Setup</p> </li> <li> <p><em>Case1</em> : In step 3 we have observed that CI has opened the network and waiting for devices to join within a finite duration of 180 seconds , if Lights is powered on within the time-frame it joins the network. Throughout the commissioning procedure for the Extended Lights it is observed that RGB led is toggling (white color) i.e. for 180 seconds</p> </li> <li> <p><em>Case2</em> : If commissioning of extended light is initiated after this 180sec, light will not get joined. To open up the network after 180 seconds, we have to input the below commands in CI, before commissioning is initiated in extended lights device.</p> <ol> <li><em>setPermitJoin 180</em> -&gt; This command opens up the network for next 180sec</li> <li><em>invokeCommissioning 8 0</em> -&gt; This command opens up the network for “finding and binding procedure”</li> </ol> <p align="Center"> <img src="doc/resources/allow_device_join_manually.jpg" /> </p> </li> <li> <p><em>Success logs</em> : When extended light commissioned with Combined Interface</p> <p align="Center"> <img src="doc/resources/success_logs_ci_ext_lights.jpg" /> </p> </li> </ul> <h5 id="light-control"> <a href="running_demo.html#light-control" aria-labelledby="light-control" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Light Control </h5> <ol> <li>RGB LED on WBZ451 curiosity board is tied with Zigbee functionality. The LED color and brightness can be changed through Zigbee network .</li> </ol> <ul> <li> <p>RGB color control from Combined Interface</p> <ul> <li>The RGB color can be controlled from Combined Interface through console commands.</li> <li>RGB color is changed from Combined Interface, will be reflected in next received report in combined Interface</li> <li> <p>The network address of the light is needed to send light control commands to light.</p> <ol> <li>This network address can be got from Combined interface console log while commissioning was done. Refer to Step 5 success log for light network address</li> </ol> <p align="Center"> <img src="doc/resources/network.jpg" /> </p> <ol> <li>Another way to get the network address from light is executing the below command in light side.</li> </ol> <p><code class="language-plaintext highlighter-rouge"> Command: getNetworkAddress Response: f088 </code></p> </li> <li> <p>The table below shows few commands for light control(on /off, brightness, hue &amp; saturation). Refer to doc <a href="consoleCommands.html"> Console Commands</a> to get different parameters of the commands</p> <div class="table-wrapper"><table> <thead> <tr> <th>Command Type</th> <th>Commands</th> <th>Paramter Details</th> </tr> </thead> <tbody> <tr> <td>RGB LED ON</td> <td>onOff 0x0 0xf088 0x23 -on</td> <td>0x23 zigbee end-point number used for Light</td> </tr> <tr> <td>RGB LED OFF</td> <td>onOff 0x0 0xf088 0x23 -off</td> <td>0x23 zigbee end-point number used for Light</td> </tr> <tr> <td>RGB LED brightness change</td> <td>moveToLevel 0x0 0xf088 0x23 0x45 0x0 0x1 0x0 0x0</td> <td>0x45 is the configurable brightness value</td> </tr> <tr> <td>RGB LED color change</td> <td>moveToHueAndSaturation 0x0 0xf088 0x23 0x45 0x67 0x0 0x0 0x0</td> <td>0x45 and 0x67 are the configurable Hue and Saturation values</td> </tr> </tbody> </table></div> </li> </ul> </li> </ul> <h5 id="other-functionalities"> <a href="running_demo.html#other-functionalities" aria-labelledby="other-functionalities" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Other Functionalities </h5> <ol> <li>On board button actions: <ul> <li>When the on board “User Button” is pressed for more than 10sec, it can delete all the networking information and will bring the device to factory default state. This functionality is available in both combined interface and light devices.</li> </ul> </li> <li>Persistent Data Storage (PDS): The RGB light status (On/Off) and brightness values are stored in NVM. So, power off/on of extended light, these values persist and RGB LED will reflect accordingly. This PDS storage is tied to zigbee network. <ul> <li>The light On/Off status and light brightness is being stored in non-volatile memory in this case. So, power off/on, the LED will be updated with light on/off and brightness values retrieved from previous transaction, whereas color values remain default HS = 0x00,0x7F</li> </ul> </li> </ol> <hr /> <p><a name="tasks"> </a></p> <h2 id="programming-the-precompiled-hex-file-using-mplabx-ipe"> <a href="running_demo.html#programming-the-precompiled-hex-file-using-mplabx-ipe" aria-labelledby="programming-the-precompiled-hex-file-using-mplabx-ipe" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Programming the precompiled hex file using MPLABX IPE </h2> <ol> <li> <p>Precompiled Hex files for combined interface and Extended light are located <a href="zigbee_combined_interface/precompiled_hex/index.html"> Combined Interface </a> , <a href="zigbee_lights/precompiled_hex/index.html"> Extended Light </a></p> </li> <li> <p>Follow the steps mentioned <a href="https://microchipdeveloper.com/ipe:programming-device">here</a></p> </li> </ol> <p><strong>Caution:</strong> Users should choose the correct Device and Tool information</p> <ol> <li>Follow the steps for <a href="running_demo.html#tasks_2">running the demo</a></li> </ol> <hr /> <p><a name="tasks_1"> </a></p> <h2 id="build-and-program-the-application"> <a href="running_demo.html#build-and-program-the-application" aria-labelledby="build-and-program-the-application" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Build and Program The Application </h2> <p>The source code of demo applications are available in Harmony 3 framework <a href="zigbee_combined_interface/firmware/index.html"> Combined Interface </a>, <a href="zigbee_lights/firmware/index.html"> Extended Light </a> . If want to do changes in the demo code and would like to program/debug the customized code follow the below instruction.</p> <ol> <li>Open the “zigbee_lights/firmware/zigbee_ExtendedLight.X” MPLABX project from MPLABX</li> </ol> <p align="left"> <img src="doc/resources/mplabx1.png" width="400" height="500" /> ----&gt; <img src="doc/resources/mplabx.png" width="400" height="500" /> </p> <ol> <li>Do your changes in the code. Clean and build your application by clicking on the Clean and Build button as shown below.</li> </ol> <p align="left"> <img src="doc/resources/mplabx2.png" /> </p> <ol> <li>Program your application to the device, by clicking on the Make and Program button as shown below</li> </ol> <p align="left"> <img src="doc/resources/mplabx3.png" /> </p> <hr /> <p><a name="tasks_3"> </a></p> <h2 id="creating-application-device-types-from-scratch-using-harmony-3"> <a href="running_demo.html#creating-application-device-types-from-scratch-using-harmony-3" aria-labelledby="creating-application-device-types-from-scratch-using-harmony-3" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating Application Device Types From Scratch Using Harmony 3 </h2> <p>The other supported device types in Microchip H3 framework based on Zigbee Lighting and Occupancy (ZLO) devices and Green power device:</p> <ol> <li>Thermostat</li> <li>Color scene controller</li> <li>Multi Sensor</li> <li>Intruder Alarm System(IAS) - ACE</li> <li>Zigbee Green Power - An additional feature which is enabled on top of the above deice types based on its capability.</li> </ol> <p>Creating a project for a device type: <a href="zigbee_project_generation.html">Generating project from H3</a></p> <hr /> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='http://192.168.0.41:4000/wireless/assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2021 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
