---
grand_parent: Examples applications
parent: BLE Building Blocks
title: UART Demo
has_children: true
has_toc: false
nav_order: 42

family: PIC32CX-BZ
market:
  - wireless
---

[![MCHP](https://www.microchip.com/ResourcePackages/Microchip/assets/dist/images/logo.png)](https://www.microchip.com)
#  UART -- Hello World

[Getting Started](../../readme.md)

[Getting Started with Peripheral Building Blocks](../../peripheral/readme.md)

[Getting Started with Central Building Blocks](../../central/readme.md)

BLE Peripheral Developers: [FreeRTOS and BLE Stack Setup](../../peripheral/freertos_ble_stack_init_peripheral.md) **-->** [Adding UART](readme.md) **-->** [Legacy Advertisements](../../peripheral/legacy_adv_sleep/readme.md) 

BLE Central Developers: [FreeRTOS and BLE Stack Setup](../../central/freertos_ble_stack_init_central.md) **-->** [Adding UART](readme.md) **-->** [Legacy Scan](../../central/legacy_scan/readme.md) 

## Introduction

This document will help users to enable UART functionality on WBZ451
Curiosity board using Harmony 3 framework.

Users of this document can choose to just run the precompiled
Application Example hex on the WBZ451 Curiosity Board and experience the
demo or can go through the steps involved in enabling UART from
scratch using Harmony 3

## Recommended Reads

1.  [FreeRtos BLE App Initialize (Peripheral)](../../peripheral/freertos_ble_stack_init_peripheral.md)

2.  [FreeRtos BLE App Initialize (Central)](../../central/freertos_ble_stack_init_central.md)

## Hardware Required

  |**Tool**                | **Qty**  |
  |------------------------| ---------|
  |WBZ451 Curiosity Board  | 1        |
  |Micro USB cable         | 1        |

## SDK Setup
1.  [SDK Setup](../../../../docs/pic32cx_bz2_wbz45x_sdk_setup.md)

## Software
1.  [TeraTerm](https://ttssh2.osdn.jp/index.html.en) 

## Programming the precompiled hex file or Application Example

### Programming the hex file using MPLABX IPE

1.  Precompiled Hex file is located <a href="hex/"> here </a>

2.  Follow the steps mentioned [here](https://microchipdeveloper.com/ipe:programming-device)

 **Caution:** Users should choose the correct Device and Tool information
 
### Programming the Application using MPLABX IDE

1.  Follow steps mentioned in section 4 of [SDK Setup document](../../../../docs/pic32cx_bz2_wbz45x_sdk_setup.md)

2.  Open and program the Application Example <a href="firmware"> uart_hello_world </a>  in MPLABX IDE 

## Demo Description

This Application Example enables users to print data over a terminal
emulator like TeraTerm

## Testing
Connect the WBZ451 Curiosity board to PC, program the application example. Open Terarerm(Speed: 115200, Data: 8-bit, Parity: none, stop
bits: 1 bit, Flow control: none) and select the COM port that is enumerated when connecting the WBZ451 Curiosity Board. Reset the board and  Demo will print "Hello World" 

## Developing this Application from scratch using Harmony 3

This section explains the steps required by a user to develop this
application example from scratch using MPLABx Harmony 3 Framework

**Tip:** New Harmony 3 Users are recommended to go through the [overview](https://microchip-mplab-harmony.github.io/mhc/doc/readme.html) of Harmony 3. Users can add/remove different components like peripheral support and other wireless functionality by following steps mentioned [here](https://microchip-mplab-harmony.github.io/mhc/doc/readme_mhc_configuration.html).

1.  Create a new MPLAB Harmony 3 Project -- [link](../../../../docs/creating_new_mplabx_harmony_project.md) for
    instructions

2.  Import Harmony 3 component configuration -- This step helps users
    setup the basic Harmony 3 components required to start their
    Application Development
    Harmony 3 component configuration related to the UART Hello World is
    available [here](export.mhc)
    Users should follow the instructions mentioned
    [here](https://microchip-mplab-harmony.github.io/mhc/doc/readme_mhc_import_export.html) to import the Harmony 3 component configuration.

    **Tip:** Import and Export functionality of Harmony 3 component
    configuration will help users to start from a known working setup of Harmony 3
    configuration

3.  Accept Dependencies or satisfiers, select "Yes"

4.  Verify if the Project Graph window has all the expected Harmony 3
    configuration

    ![](media/uart_hello_world_1.PNG)
   
## Verify UART Configuration
1.  Select **SERCOM0** component in project graph
    
    ![](media/uart_hello_world_2.PNG)
    
2.  Select **system** component in project graph
    
    ![](media/uart_hello_world_5.PNG)

## Generate Code [link](../../../../docs/generate_code.md) for instructions

## Files and Routines Automatically generated by the MHC
After generating the program source from MHC interface by clicking Generate Code, the peripheral libraries (PLIBs) configuration can be found in the following project directories 

![](media/uart_hello_world_3.PNG)

The sercom initialization routine executed during program initialization can be found in the project files. This initialization routine is automatically generated by the MHC according to the user settings

![](media/uart_hello_world_4.PNG)

### Header Files 

-   Header File associated with the sercom0 peripheral library or any
    other peripheral library for a different example is included in
    definitions.h file

**Tip:** To use all the SERCOM0 functionality include the definitions.h
file in Application code

### Function Calls

Harmony 3 generates and adds the code to initialize the UART peripheral
in *SYS_Initialize()* function

-   SERCOM0_USART_Initialize() is the API that will be called inside the
    SYS_Initialize() function

## User Application Development

### Include

-   definitions.h in app.c (definitions.h is called to include the peripheral.h files)
-   app_idle_task.h in app.c 

### Transfer Data using UART
 -   Add app_idle_task() in the function vApplicationIdleHook() in freertos_hooks.c

-   SERCOM0_USART_Write() is the used to submit a write buffer to the given USART       peripheral to transfer data, user can call this API in APP_STATE_INIT:

Users can exercise various other UART/SERCOM functionalities by using
the peripheral library [documentation](https://microchip-mplab-harmony.github.io/csp/frames.html?frmname=topic&frmfile=05544.html)

## Where to go from here 

-   Central role [BLE Scanner](../../central/legacy_scan/readme.md)

-   Peripheral Role [BLE Advertisements](../../peripheral/legacy_adv_sleep/readme.md)


-   Peripheral Role [BLE Extended Advertisements (sleep)](../../peripheral/ext_adv/readme.md)
